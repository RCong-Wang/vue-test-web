"use strict";(self["webpackChunkmy_vue_app"]=self["webpackChunkmy_vue_app"]||[]).push([[855],{6855:function(e,s,n){n.r(s),n.d(s,{default:function(){return c}});var t=n(3396),o=n(9242);const a=(0,t._)("label",{for:"username"},"用戶名: ",-1),r=(0,t._)("label",{for:"password"},"密碼: ",-1),d=(0,t._)("div",null,[(0,t._)("button",{type:"submit"},"登陸")],-1);function u(e,s,n,u,i,l){return(0,t.wg)(),(0,t.iD)("div",null,[(0,t._)("form",{onSubmit:s[2]||(s[2]=(...e)=>l.login&&l.login(...e)),method:"POST"},[(0,t._)("div",null,[a,(0,t.wy)((0,t._)("input",{type:"text",id:"username","onUpdate:modelValue":s[0]||(s[0]=e=>i.username=e)},null,512),[[o.nr,i.username]])]),(0,t._)("div",null,[r,(0,t.wy)((0,t._)("input",{type:"password",id:"password","onUpdate:modelValue":s[1]||(s[1]=e=>i.password=e)},null,512),[[o.nr,i.password]])]),d],32)])}n(560);var i={created(){this.axios=(0,t.f3)("axios")},data(){return{username:"",password:""}},methods:{login(e){e.preventDefault();const s={username:this.username,password:this.password};this.axios.get("https://5e0d-2401-e180-8d23-1fdd-b1d6-64a-7746-e486.ngrok-free.app/user/getcsrf/").then((e=>{const n=e.data.csrf_token;this.axios.post("https://5e0d-2401-e180-8d23-1fdd-b1d6-64a-7746-e486.ngrok-free.app/user/login/",s,{withCredentials:!0,headers:{"X-CSRFToken":n,"Content-Type":"application/json"}}).then((e=>{console.log(document.cookie.includes("sessionid")),console.log("登陸成功:",e.data),this.$router.push("/")})).catch((e=>{console.error("登陸失敗:",e)}))}))}}},l=n(89);const p=(0,l.Z)(i,[["render",u]]);var c=p}}]);
//# sourceMappingURL=855.6b93c77b.js.map