{"version":3,"file":"js/673.20b4a883.js","mappings":"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","sources":["webpack://my-vue-app/./src/views/Friend.vue","webpack://my-vue-app/./src/views/Friend.vue?c6af"],"sourcesContent":["<template>\r\n  <div>\r\n    <p>good</p>\r\n\r\n    <ul>\r\n      <li v-for=\"friend in Friends\" :key=\"friend.friend_id\" >\r\n        <button @click=\"EnterChatroom(friend.friend_id)\">{{ friend.friend_id }}_{{ friend.friend_name }}</button>\r\n      </li>\r\n    </ul>\r\n    \r\n  </div>\r\n  <div>\r\n    <label for=\"search-box\">搜尋好友: </label>\r\n    <input type=\"text\" id=\"search-box\" v-model=\"search_box\">\r\n    <button @click=\"SearchFriend\">搜尋</button>\r\n  </div>\r\n  <div>\r\n    <button v-if=\"user_id\" @click=\"AddFriend\">{{ user_name }}</button>\r\n    <!-- <p v-if=\"user_id\">{{ user_name }}</p> -->\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import { inject } from 'vue';\r\n  \r\n  export default {\r\n    name: \"Friend\",\r\n    created(){\r\n      this.axios = inject('axios');\r\n      this.FriendList();\r\n    },\r\n    data(){\r\n      return{\r\n        search_box: '',\r\n        user_id: null,\r\n        user_name: '',\r\n        Friends: [],\r\n      }\r\n    },\r\n    methods:{\r\n      FriendList(){\r\n        this.axios.get(`${this.local_http}/user/friendlist/`)\r\n        .then(response=>{\r\n          this.Friends = response.data.friends;\r\n          console.log(this.Friends)\r\n        })\r\n        .catch(error=>{\r\n          console.error('好友清單錯誤',error);\r\n        })\r\n        console.log(\"good\");\r\n      },\r\n      SearchFriend(){\r\n        this.axios.get(`${this.local_http}/user/searchfriend/`,{\r\n          params:{\r\n            username: this.search_box\r\n          }\r\n        })\r\n        .then(response=>{\r\n          this.user_id = response.data.user_id;\r\n          this.user_name = response.data.user;\r\n\r\n          console.log(\"搜尋成功: \",response.data);\r\n        })\r\n        .catch(error=>{\r\n          console.error('搜尋失敗',error);\r\n        })\r\n      },\r\n      AddFriend(){\r\n        this.axios.get(`${this.local_http}/user/getcsrf/`)\r\n        .then(response=>{\r\n          const csrf = response.data.csrf_token;\r\n          console.log(csrf);          \r\n          this.axios.post(`${this.local_http}/user/addfriend/`,this.user_id,{\r\n              withCredentials: true,\r\n              headers:{\r\n                'X-CSRFToken': csrf,\r\n                'Content-Type': 'application/json',\r\n              }\r\n          })\r\n          .then(response=>{\r\n            this.FriendList();\r\n            if (response && response.data) {\r\n              console.log('成功回應:', response.data);\r\n            }\r\n            else {\r\n              console.log('成功回應:',response);\r\n              console.error('回應未定義或缺少數據');\r\n            }\r\n          })\r\n          .catch(error => {\r\n            if (error.response && error.response.data) {\r\n              console.error('錯誤訊息:', error.response.data); // 如果有 response data，輸出詳細錯誤信息\r\n            }\r\n            else {\r\n              console.error('發生錯誤:', error); // 其他錯誤，顯示錯誤物件\r\n            }\r\n          });\r\n        })\r\n      },\r\n      EnterChatroom(friend_id){\r\n        console.log(friend_id);\r\n        this.axios.get(`${this.local_http}/main/isexistchatroom/`,{\r\n          params:{\r\n            id: friend_id\r\n          }\r\n        })\r\n        .then(response=>{\r\n          console.log(\"搜尋成功\",response.data);\r\n          if(response.data.success){\r\n            this.$store.dispatch('updateroomid',response.data.success);\r\n            this.$router.push('chatroom/');\r\n          }\r\n          else{\r\n            this.axios.get(`${this.local_http}/user/getcsrf/`)\r\n            .then(response=>{\r\n              const csrf = response.data.csrf_token;\r\n              console.log(csrf);\r\n              this.axios.post(`${this.local_http}/main/createchatroom/`,friend_id,{\r\n                withCredentials: true,\r\n                headers:{\r\n                  'X-CSRFToken': csrf,\r\n                  'Content-Type': 'application/json',\r\n                }\r\n              })\r\n              .then(response=>{\r\n                this.$store.dispatch('updateroomid',response.data.success);\r\n                this.$router.push('chatroom/');\r\n              })\r\n              .catch(error=>{\r\n                console.error(\"創建聊天室失敗:\",error);\r\n              })\r\n            })\r\n          }\r\n        })\r\n        .catch(error=>{\r\n          console.error(\"進入聊天室錯誤:\",error);\r\n        })\r\n      },\r\n    },\r\n  };\r\n</script>","import { render } from \"./Friend.vue?vue&type=template&id=1953e762\"\nimport script from \"./Friend.vue?vue&type=script&lang=js\"\nexport * from \"./Friend.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createElementVNode","for","_hoisted_1","_createElementBlock","_Fragment","_renderList","$data","Friends","friend","key","friend_id","onClick","$event","$options","EnterChatroom","_toDisplayString","friend_name","_hoisted_2","_hoisted_3","type","id","search_box","_cache","args","SearchFriend","user_id","AddFriend","user_name","name","created","this","axios","inject","FriendList","data","methods","get","local_http","then","response","friends","console","log","catch","error","params","username","user","csrf","csrf_token","post","withCredentials","headers","success","$store","dispatch","$router","push","__exports__","render"],"sourceRoot":""}