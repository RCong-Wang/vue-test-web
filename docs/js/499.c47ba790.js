"use strict";(self["webpackChunkmy_vue_app"]=self["webpackChunkmy_vue_app"]||[]).push([[499],{8499:function(e,s,n){n.r(s),n.d(s,{default:function(){return c}});var t=n(3396),a=n(9242);const o=(0,t._)("label",{for:"username"},"用戶名: ",-1),r=(0,t._)("label",{for:"password"},"密碼: ",-1),u=(0,t._)("div",null,[(0,t._)("button",{type:"submit"},"登陸")],-1);function i(e,s,n,i,l,d){return(0,t.wg)(),(0,t.iD)("div",null,[(0,t._)("form",{onSubmit:s[2]||(s[2]=(...e)=>d.login&&d.login(...e)),method:"POST"},[(0,t._)("div",null,[o,(0,t.wy)((0,t._)("input",{type:"text",id:"username","onUpdate:modelValue":s[0]||(s[0]=e=>l.username=e)},null,512),[[a.nr,l.username]])]),(0,t._)("div",null,[r,(0,t.wy)((0,t._)("input",{type:"password",id:"password","onUpdate:modelValue":s[1]||(s[1]=e=>l.password=e)},null,512),[[a.nr,l.password]])]),u],32)])}n(560);var l={created(){this.axios=(0,t.f3)("axios")},data(){return{username:"",password:""}},methods:{login(e){e.preventDefault();const s={username:this.username,password:this.password};this.axios.get("https://aa0e-2401-e180-8850-ae-c03b-534a-dcee-f333.ngrok-free.app/user/getcsrf/").then((e=>{const n=e.data.csrf_token;this.axios.post("https://aa0e-2401-e180-8850-ae-c03b-534a-dcee-f333.ngrok-free.app/user/login/",s,{withCredentials:!0,headers:{"X-CSRFToken":n,"Content-Type":"application/json"}}).then((e=>{console.log(document.cookie.includes("sessionid")),console.log("登陸成功:",e.data),this.$router.push("/")})).catch((e=>{console.error("登陸失敗:",e)}))}))}}},d=n(89);const p=(0,d.Z)(l,[["render",i]]);var c=p}}]);
//# sourceMappingURL=499.c47ba790.js.map