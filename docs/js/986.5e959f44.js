"use strict";(self["webpackChunkmy_vue_app"]=self["webpackChunkmy_vue_app"]||[]).push([[986],{6986:function(e,s,t){t.r(s),t.d(s,{default:function(){return c}});var n=t(3396),o=t(9242);const a=(0,n._)("label",{for:"username"},"用戶名: ",-1),r=(0,n._)("label",{for:"password"},"密碼: ",-1),l=(0,n._)("div",null,[(0,n._)("button",{type:"submit"},"登陸")],-1);function u(e,s,t,u,i,d){return(0,n.wg)(),(0,n.iD)("div",null,[(0,n._)("form",{onSubmit:s[2]||(s[2]=(...e)=>d.login&&d.login(...e)),method:"POST"},[(0,n._)("div",null,[a,(0,n.wy)((0,n._)("input",{type:"text",id:"username","onUpdate:modelValue":s[0]||(s[0]=e=>i.username=e)},null,512),[[o.nr,i.username]])]),(0,n._)("div",null,[r,(0,n.wy)((0,n._)("input",{type:"password",id:"password","onUpdate:modelValue":s[1]||(s[1]=e=>i.password=e)},null,512),[[o.nr,i.password]])]),l],32)])}t(560);var i={created(){this.axios=(0,n.f3)("axios")},data(){return{username:"",password:""}},methods:{login(e){e.preventDefault();const s={username:this.username,password:this.password};this.axios.get(`${this.local_http}/user/getcsrf/`).then((e=>{const t=e.data.csrf_token;this.axios.post(`${this.local_http}/user/login/`,s,{withCredentials:!0,headers:{"X-CSRFToken":t,"Content-Type":"application/json"}}).then((e=>{console.log(document.cookie.includes("sessionid")),console.log("登陸成功:",e.data),this.$router.push("/")})).catch((e=>{console.error("登陸失敗:",e)}))}))}}},d=t(89);const p=(0,d.Z)(i,[["render",u]]);var c=p}}]);
//# sourceMappingURL=986.5e959f44.js.map